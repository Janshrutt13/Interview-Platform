{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/firebase/admin.ts"],"sourcesContent":["import {initializeApp , cert , getApps} from \"firebase-admin/app\";\r\nimport {getAuth} from \"firebase-admin/auth\";\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if(!apps.length){\r\n        initializeApp({\r\n            credential : cert({\r\n                projectId : process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail : process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey : process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        auth : getAuth(),\r\n        db : getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {db: adminDb, auth} = initFirebaseAdmin()"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,IAAA,2JAAO;IAEpB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,IAAA,iKAAa,EAAC;YACV,YAAa,IAAA,wJAAI,EAAC;gBACd,WAAY,QAAQ,GAAG,CAAC,mBAAmB;gBAC3C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;gBAC/C,YAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YACnE;QACJ;IACJ;IAGA,OAAO;QACH,MAAO,IAAA,6JAAO;QACd,IAAK,IAAA,4KAAY;IACrB;AACJ;AAEO,MAAM,EAAC,IAAI,OAAO,EAAE,IAAI,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/lib/actions/auth.action.ts"],"sourcesContent":["'use server';\r\n\r\nimport { adminDb, auth } from \"@/firebase/admin\";\r\nimport { cookies } from \"next/headers\";\r\n\r\nconst ONE_WEEK = 60 * 60 * 24 * 7; // seconds in a week\r\n\r\nexport async function signUp(params: SignUpParams) {\r\n    const { uid, name, email } = params;\r\n\r\n    try {\r\n        const userRecord = await adminDb.collection(\"users\").doc(uid).get();\r\n\r\n        if (userRecord.exists) {\r\n            return {\r\n                success: false,\r\n                message: \"User already exists, please Sign Up\",\r\n            };\r\n        }\r\n\r\n        await adminDb.collection(\"users\").doc(uid).set({\r\n            name,\r\n            email,\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            message: \"User created successfully\",\r\n        };\r\n    } catch (e: any) {\r\n        console.error(\"Error creating user\", e);\r\n\r\n        if (e.code === \"auth/email-already-exists\") {\r\n            return {\r\n                success: false,\r\n                message: \"Email already exists\",\r\n            };\r\n        }\r\n\r\n        return {\r\n            success: false,\r\n            message: \"Failed to create user\",\r\n        };\r\n    }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string) {\r\n    const cookieStore = await cookies();\r\n\r\n    const sessionCookie = await auth.createSessionCookie(idToken, {\r\n        expiresIn: ONE_WEEK * 1000, // ms\r\n    });\r\n\r\n    cookieStore.set(\"session\", sessionCookie, {\r\n        maxAge: ONE_WEEK,\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === \"production\",\r\n        path: \"/\",\r\n        sameSite: \"lax\",\r\n    });\r\n}\r\n\r\nexport async function signIn(params: SignInParams) {\r\n    const { email, idToken } = params;\r\n\r\n    try {\r\n        const userRecord = await auth.getUserByEmail(email);\r\n        if (!userRecord) {\r\n            return {\r\n                success: false,\r\n                message: \"User does not exist. Create an account.\",\r\n            };\r\n        }\r\n\r\n        await setSessionCookie(idToken);\r\n\r\n        return {\r\n            success: true,\r\n            message: \"Login successful\",\r\n        };\r\n    } catch (error: any) {\r\n        console.log(\"\", error);\r\n\r\n        return {\r\n            success: false,\r\n            message: \"Failed to log into account. Please try again.\",\r\n        };\r\n    }\r\n}\r\n\r\n// Sign out user by clearing the session cookie\r\nexport async function signOut() {\r\n    const cookieStore = await cookies();\r\n\r\n    cookieStore.delete(\"session\");\r\n}\r\n\r\n//Get current user from session cookie\r\nexport async function getCurrentUser() : Promise<User | null> {\r\n    const cookieStore = await cookies();\r\n\r\n    const sessionCookie = cookieStore.get(\"session\")?.value;\r\n    if (!sessionCookie) return null;\r\n\r\n    try {\r\n        const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n        const userRecord = await adminDb\r\n            .collection(\"users\")\r\n            .doc(decodedClaims.uid)\r\n            .get()\r\n\r\n        if (!userRecord) return null;\r\n\r\n        return {\r\n            ...userRecord.data(),\r\n            id: userRecord.id,\r\n        } as User;\r\n    } catch (err) {\r\n        console.log(err);\r\n\r\n        // Invalid or expired session\r\n        return null;\r\n    }\r\n}\r\n\r\n//Check if user is authenticated\r\nexport async function isAuthenticated(){\r\n    const user = await getCurrentUser();\r\n    return !!user;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;AAEA,MAAM,WAAW,KAAK,KAAK,KAAK,GAAG,oBAAoB;AAEhD,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAE7B,IAAI;QACA,MAAM,aAAa,MAAM,4HAAO,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAEjE,IAAI,WAAW,MAAM,EAAE;YACnB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,MAAM,4HAAO,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YAC3C;YACA;QACJ;QAEA,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ,EAAE,OAAO,GAAQ;QACb,QAAQ,KAAK,CAAC,uBAAuB;QAErC,IAAI,EAAE,IAAI,KAAK,6BAA6B;YACxC,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAEO,eAAe,iBAAiB,OAAe;IAClD,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,MAAM,gBAAgB,MAAM,yHAAI,CAAC,mBAAmB,CAAC,SAAS;QAC1D,WAAW,WAAW;IAC1B;IAEA,YAAY,GAAG,CAAC,WAAW,eAAe;QACtC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACd;AACJ;AAEO,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,IAAI;QACA,MAAM,aAAa,MAAM,yHAAI,CAAC,cAAc,CAAC;QAC7C,IAAI,CAAC,YAAY;YACb,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,MAAM,iBAAiB;QAEvB,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,GAAG,CAAC,IAAI;QAEhB,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAGO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,YAAY,MAAM,CAAC;AACvB;AAGO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACA,MAAM,gBAAgB,MAAM,yHAAI,CAAC,mBAAmB,CAAC,eAAe;QACpE,MAAM,aAAa,MAAM,4HAAO,CAC3B,UAAU,CAAC,SACX,GAAG,CAAC,cAAc,GAAG,EACrB,GAAG;QAER,IAAI,CAAC,YAAY,OAAO;QAExB,OAAO;YACH,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,WAAW,EAAE;QACrB;IACJ,EAAE,OAAO,KAAK;QACV,QAAQ,GAAG,CAAC;QAEZ,6BAA6B;QAC7B,OAAO;IACX;AACJ;AAGO,eAAe;IAClB,MAAM,OAAO,MAAM;IACnB,OAAO,CAAC,CAAC;AACb;;;IA1HsB;IAuCA;IAgBA;IA6BA;IAOA;IA4BA;;AAvHA,+OAAA;AAuCA,+OAAA;AAgBA,+OAAA;AA6BA,+OAAA;AAOA,+OAAA;AA4BA,+OAAA","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/.next-internal/server/app/%28auth%29/sign-up/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {signIn as '40dd2ef11e60b871a641e2342b29ca04d63654643b'} from 'ACTIONS_MODULE0'\nexport {signUp as '4092afee6e2eee9f92848aae65993f28c9242c3620'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/components/AuthForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AuthForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AuthForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/components/AuthForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AuthForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AuthForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuQ,GACpS,qCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/app/%28auth%29/sign-up/page.tsx"],"sourcesContent":["import React from 'react';\r\nimport AuthForm from \"@/components/AuthForm\";\r\n\r\nconst page = () => {\r\n    return <AuthForm type = \"sign-up\" />\r\n};\r\n\r\nexport default page;\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEA,MAAM,OAAO;IACT,qBAAO,8OAAC,kIAAQ;QAAC,MAAO;;;;;;AAC5B;uCAEe","debugId":null}}]
}