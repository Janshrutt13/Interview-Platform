{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/firebase/admin.ts"],"sourcesContent":["import {initializeApp , cert , getApps} from \"firebase-admin/app\";\r\nimport {getAuth} from \"firebase-admin/auth\";\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if(!apps.length){\r\n        initializeApp({\r\n            credential : cert({\r\n                projectId : process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail : process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey : process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        auth : getAuth(),\r\n        db : getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {db: adminDb, auth} = initFirebaseAdmin()"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,IAAA,2JAAO;IAEpB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,IAAA,iKAAa,EAAC;YACV,YAAa,IAAA,wJAAI,EAAC;gBACd,WAAY,QAAQ,GAAG,CAAC,mBAAmB;gBAC3C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;gBAC/C,YAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YACnE;QACJ;IACJ;IAGA,OAAO;QACH,MAAO,IAAA,6JAAO;QACd,IAAK,IAAA,4KAAY;IACrB;AACJ;AAEO,MAAM,EAAC,IAAI,OAAO,EAAE,IAAI,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/app/api/user/skills/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { auth, adminDb } from \"@/firebase/admin\";\nimport { FieldValue } from \"firebase-admin/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { app } from \"@/firebase/client\";\n\nasync function getUidFromRequest(req: NextRequest): Promise<string | null> {\n  const authHeader = req.headers.get(\"authorization\");\n  \n  if (!authHeader) return null;\n  \n  const token = authHeader.split(\" \")[1];\n  \n  if (!token) return null;\n  \n  try {\n    const decoded = await auth.verifyIdToken(token);\n    return decoded.uid;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const uid = await getUidFromRequest(req);\n    \n    if (!uid) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n    \n    const { skill, domain } = await req.json();\n    \n    if (!skill || typeof skill !== \"string\" || !domain) {\n      return NextResponse.json({ error: \"Invalid skill or domain\" }, { status: 400 });\n    }\n    \n    const skillObj = { name: skill, domain };\n    \n    const userRef = adminDb.collection(\"users\").doc(uid);\n    const userDoc = await userRef.get();\n    \n    if (!userDoc.exists) {\n      await userRef.set({ skills: [skillObj] }, { merge: true });\n      return NextResponse.json({ success: true, created: true });\n    } else {\n      const data = userDoc.data();\n      \n      if (!Array.isArray(data?.skills)) {\n        await userRef.update({ skills: [skillObj] });\n        return NextResponse.json({ success: true, initialized: true });\n      }\n      \n      await userRef.update({ skills: FieldValue.arrayUnion(skillObj) });\n      return NextResponse.json({ success: true });\n    }\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to add skill\", details: String(error) }, { status: 500 });\n  }\n}\n\nexport async function DELETE(req: NextRequest) {\n  try {\n    const uid = await getUidFromRequest(req);\n    if (!uid) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n    const { skill, domain } = await req.json();\n    if (!skill || typeof skill !== \"string\" || !domain) {\n      return NextResponse.json({ error: \"Invalid skill or domain\" }, { status: 400 });\n    }\n    \n    const skillObj = { name: skill, domain };\n    const userRef = adminDb.collection(\"users\").doc(uid);\n    await userRef.update({ skills: FieldValue.arrayRemove(skillObj) });\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to remove skill\", details: String(error) }, { status: 500 });\n  }\n}\n\nexport async function GET(req: NextRequest) {\n  try {\n    const uid = await getUidFromRequest(req);\n    \n    if (!uid) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n    \n    const userRef = adminDb.collection(\"users\").doc(uid);\n    const userDoc = await userRef.get();\n    \n    if (!userDoc.exists) {\n      return NextResponse.json({ skills: [] });\n    }\n    \n    const data = userDoc.data();\n    \n    return NextResponse.json({ skills: data?.skills || [] });\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to fetch skills\" }, { status: 500 });\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}