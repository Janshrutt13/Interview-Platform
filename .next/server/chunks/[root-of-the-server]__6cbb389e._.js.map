{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/firebase/admin.ts"],"sourcesContent":["import {initializeApp , cert , getApps} from \"firebase-admin/app\";\r\nimport {getAuth} from \"firebase-admin/auth\";\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if(!apps.length){\r\n        initializeApp({\r\n            credential : cert({\r\n                projectId : process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail : process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey : process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        auth : getAuth(),\r\n        db : getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {db, auth} = initFirebaseAdmin()"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,IAAA,2JAAO;IAEpB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,IAAA,iKAAa,EAAC;YACV,YAAa,IAAA,wJAAI,EAAC;gBACd,WAAY,QAAQ,GAAG,CAAC,mBAAmB;gBAC3C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;gBAC/C,YAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YACnE;QACJ;IACJ;IAGA,OAAO;QACH,MAAO,IAAA,6JAAO;QACd,IAAK,IAAA,4KAAY;IACrB;AACJ;AAEO,MAAM,EAAC,EAAE,EAAE,IAAI,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/app/api/user/profile/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth, db } from \"@/firebase/admin\";\r\n\r\nasync function getUidFromRequest(req: NextRequest): Promise<string | null> {\r\n  const authHeader = req.headers.get(\"authorization\");\r\n  if (!authHeader) return null;\r\n  const token = authHeader.split(\" \")[1];\r\n  if (!token) return null;\r\n  try {\r\n    const decoded = await auth.verifyIdToken(token);\r\n    return decoded.uid;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function GET(req: NextRequest) {\r\n  const uid = await getUidFromRequest(req);\r\n  if (!uid) {\r\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\r\n  }\r\n\r\n  const userDoc = await db.collection(\"users\").doc(uid).get();\r\n  if (!userDoc.exists) {\r\n    return NextResponse.json({ error: \"User not found\" }, { status: 404 });\r\n  }\r\n  const userData = userDoc.data();\r\n\r\n  // Dossiers: either as array or subcollection\r\n  let dossiers = [];\r\n  if (userData?.dossiers) {\r\n    dossiers = userData.dossiers;\r\n  } else {\r\n    const dossiersSnap = await db.collection(\"users\").doc(uid).collection(\"dossiers\").get();\r\n    dossiers = dossiersSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  }\r\n\r\n  return NextResponse.json({\r\n    ...userData,\r\n    id: uid,\r\n    skills: userData?.skills || [],\r\n    dossiers: dossiers || [],\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEA,eAAe,kBAAkB,GAAgB;IAC/C,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;IACnC,IAAI,CAAC,YAAY,OAAO;IACxB,MAAM,QAAQ,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;IACtC,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI;QACF,MAAM,UAAU,MAAM,2HAAI,CAAC,aAAa,CAAC;QACzC,OAAO,QAAQ,GAAG;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,IAAI,GAAgB;IACxC,MAAM,MAAM,MAAM,kBAAkB;IACpC,IAAI,CAAC,KAAK;QACR,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,UAAU,MAAM,yHAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;IACzD,IAAI,CAAC,QAAQ,MAAM,EAAE;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;IACA,MAAM,WAAW,QAAQ,IAAI;IAE7B,6CAA6C;IAC7C,IAAI,WAAW,EAAE;IACjB,IAAI,UAAU,UAAU;QACtB,WAAW,SAAS,QAAQ;IAC9B,OAAO;QACL,MAAM,eAAe,MAAM,yHAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,UAAU,CAAC,YAAY,GAAG;QACrF,WAAW,aAAa,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBAAE,IAAI,IAAI,EAAE;gBAAE,GAAG,IAAI,IAAI,EAAE;YAAC,CAAC;IACxE;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,GAAG,QAAQ;QACX,IAAI;QACJ,QAAQ,UAAU,UAAU,EAAE;QAC9B,UAAU,YAAY,EAAE;IAC1B;AACF","debugId":null}}]
}