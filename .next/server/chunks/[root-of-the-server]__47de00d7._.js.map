{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/firebase/admin.ts"],"sourcesContent":["import {initializeApp , cert , getApps} from \"firebase-admin/app\";\r\nimport {getAuth} from \"firebase-admin/auth\";\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if(!apps.length){\r\n        initializeApp({\r\n            credential : cert({\r\n                projectId : process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail : process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey : process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        auth : getAuth(),\r\n        db : getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {db, auth} = initFirebaseAdmin()"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,IAAA,2JAAO;IAEpB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,IAAA,iKAAa,EAAC;YACV,YAAa,IAAA,wJAAI,EAAC;gBACd,WAAY,QAAQ,GAAG,CAAC,mBAAmB;gBAC3C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;gBAC/C,YAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YACnE;QACJ;IACJ;IAGA,OAAO;QACH,MAAO,IAAA,6JAAO;QACd,IAAK,IAAA,4KAAY;IACrB;AACJ;AAEO,MAAM,EAAC,EAAE,EAAE,IAAI,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/app/api/recommendations/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { auth, db } from \"@/firebase/admin\";\nimport { generateText } from \"ai\";\nimport { google } from \"@ai-sdk/google\";\n\nasync function getUidFromRequest(req: NextRequest): Promise<string | null> {\n  const authHeader = req.headers.get(\"authorization\");\n  if (!authHeader) return null;\n  \n  const token = authHeader.split(\" \")[1];\n  if (!token) return null;\n  \n  try {\n    const decoded = await auth.verifyIdToken(token);\n    return decoded.uid;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function GET(req: NextRequest) {\n  try {\n    const uid = await getUidFromRequest(req);\n    if (!uid) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n    \n    const userRef = db.collection(\"users\").doc(uid);\n    const userDoc = await userRef.get();\n    \n    if (!userDoc.exists) {\n      return NextResponse.json({ error: \"User not found\" }, { status: 404 });\n    }\n    \n    const userData = userDoc.data();\n    const skills = userData?.skills || [];\n    \n    if (skills.length === 0) {\n      return NextResponse.json({ error: \"No skills found. Please add skills first.\" }, { status: 400 });\n    }\n\n    const skillNames = skills.map((skill: any) => skill.name);\n    const domains = [...new Set(skills.map((skill: any) => skill.domain))];\n\n    const { text: recommendationsText } = await generateText({\n      model: google(\"gemini-2.0-flash-001\"),\n      system: \"You are a learning recommendation expert. Provide high-quality, specific learning resources.\",\n      prompt: `Based on these user skills: ${skillNames.join(\", \")} in domains: ${domains.join(\", \")}\n\nGenerate personalized learning recommendations in JSON format:\n{\n  \"courses\": [\n    {\n      \"title\": \"Course Title\",\n      \"provider\": \"Platform Name\",\n      \"description\": \"Brief description\",\n      \"level\": \"Beginner/Intermediate/Advanced\",\n      \"estimatedHours\": \"X hours\",\n      \"skills\": [\"skill1\", \"skill2\"]\n    }\n  ],\n  \"blogs\": [\n    {\n      \"title\": \"Blog Title\",\n      \"author\": \"Author Name\",\n      \"description\": \"Brief description\",\n      \"readTime\": \"X min read\",\n      \"skills\": [\"skill1\", \"skill2\"]\n    }\n  ],\n  \"videos\": [\n    {\n      \"title\": \"Video Title\",\n      \"creator\": \"Creator Name\",\n      \"description\": \"Brief description\",\n      \"duration\": \"X minutes\",\n      \"skills\": [\"skill1\", \"skill2\"]\n    }\n  ],\n  \"books\": [\n    {\n      \"title\": \"Book Title\",\n      \"author\": \"Author Name\",\n      \"description\": \"Brief description\",\n      \"level\": \"Beginner/Intermediate/Advanced\",\n      \"skills\": [\"skill1\", \"skill2\"]\n    }\n  ]\n}\n\nProvide 3-5 items per category. Focus on current, relevant, and high-quality resources.`\n    });\n\n    let recommendations;\n    try {\n      let jsonText = recommendationsText.trim();\n      if (jsonText.startsWith('```json')) {\n        jsonText = jsonText.replace(/```json\\s*/, '').replace(/\\s*```$/, '');\n      } else if (jsonText.startsWith('```')) {\n        jsonText = jsonText.replace(/```\\s*/, '').replace(/\\s*```$/, '');\n      }\n      recommendations = JSON.parse(jsonText);\n    } catch (parseError) {\n      return NextResponse.json({ error: \"Failed to generate recommendations\" }, { status: 500 });\n    }\n\n    return NextResponse.json({ \n      success: true, \n      recommendations,\n      userSkills: skillNames,\n      domains \n    });\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to fetch recommendations\" }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;;;AAEA,eAAe,kBAAkB,GAAgB;IAC/C,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;IACnC,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,QAAQ,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;IACtC,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI;QACF,MAAM,UAAU,MAAM,2HAAI,CAAC,aAAa,CAAC;QACzC,OAAO,QAAQ,GAAG;IACpB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,MAAM,MAAM,kBAAkB;QACpC,IAAI,CAAC,KAAK;YACR,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,UAAU,yHAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC;QAC3C,MAAM,UAAU,MAAM,QAAQ,GAAG;QAEjC,IAAI,CAAC,QAAQ,MAAM,EAAE;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,MAAM,WAAW,QAAQ,IAAI;QAC7B,MAAM,SAAS,UAAU,UAAU,EAAE;QAErC,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA4C,GAAG;gBAAE,QAAQ;YAAI;QACjG;QAEA,MAAM,aAAa,OAAO,GAAG,CAAC,CAAC,QAAe,MAAM,IAAI;QACxD,MAAM,UAAU;eAAI,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC,QAAe,MAAM,MAAM;SAAG;QAEtE,MAAM,EAAE,MAAM,mBAAmB,EAAE,GAAG,MAAM,IAAA,sKAAY,EAAC;YACvD,OAAO,IAAA,mKAAM,EAAC;YACd,QAAQ;YACR,QAAQ,CAAC,4BAA4B,EAAE,WAAW,IAAI,CAAC,MAAM,aAAa,EAAE,QAAQ,IAAI,CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFA2Cd,CAAC;QACpF;QAEA,IAAI;QACJ,IAAI;YACF,IAAI,WAAW,oBAAoB,IAAI;YACvC,IAAI,SAAS,UAAU,CAAC,YAAY;gBAClC,WAAW,SAAS,OAAO,CAAC,cAAc,IAAI,OAAO,CAAC,WAAW;YACnE,OAAO,IAAI,SAAS,UAAU,CAAC,QAAQ;gBACrC,WAAW,SAAS,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,WAAW;YAC/D;YACA,kBAAkB,KAAK,KAAK,CAAC;QAC/B,EAAE,OAAO,YAAY;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqC,GAAG;gBAAE,QAAQ;YAAI;QAC1F;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,YAAY;YACZ;QACF;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvF;AACF","debugId":null}}]
}