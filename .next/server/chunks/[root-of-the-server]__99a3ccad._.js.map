{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/firebase/admin.ts"],"sourcesContent":["import {initializeApp , cert , getApps} from \"firebase-admin/app\";\r\nimport {getAuth} from \"firebase-admin/auth\";\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps = getApps();\r\n\r\n    if(!apps.length){\r\n        initializeApp({\r\n            credential : cert({\r\n                projectId : process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail : process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey : process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\r\n            }),\r\n        });\r\n    }\r\n\r\n\r\n    return {\r\n        auth : getAuth(),\r\n        db : getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {db: adminDb, auth} = initFirebaseAdmin()"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,IAAA,2JAAO;IAEpB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,IAAA,iKAAa,EAAC;YACV,YAAa,IAAA,wJAAI,EAAC;gBACd,WAAY,QAAQ,GAAG,CAAC,mBAAmB;gBAC3C,aAAc,QAAQ,GAAG,CAAC,qBAAqB;gBAC/C,YAAa,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YACnE;QACJ;IACJ;IAGA,OAAO;QACH,MAAO,IAAA,6JAAO;QACd,IAAK,IAAA,4KAAY;IACrB;AACJ;AAEO,MAAM,EAAC,IAAI,OAAO,EAAE,IAAI,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lenovo/OneDrive/Desktop/interview-platform/app/api/upload-resume/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { adminDb } from '@/firebase/admin';\nimport {pdf} from 'pdf-parse';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData();\n    const file = formData.get('resume') as File;\n    const userId = formData.get('userId') as string;\n\n    if (!file || !userId) {\n      return NextResponse.json({ error: 'Missing file or userId' }, { status: 400 });\n    }\n\n    if (file.type !== 'application/pdf') {\n      return NextResponse.json({ error: 'Only PDF files are allowed' }, { status: 400 });\n    }\n\n    // Convert file to buffer\n    const buffer = Buffer.from(await file.arrayBuffer());\n    \n    // Extract text from PDF\n    let resumeText = '';\n    try {\n      const data = await pdf(buffer);\n      resumeText = data.text || 'Could not extract text from PDF';\n    } catch (error) {\n      console.error('PDF extraction error:', error);\n      resumeText = `PDF file uploaded: ${file.name}. Could not extract text automatically. Please enter your resume details manually.`;\n    }\n\n    // Store resume data using Admin SDK\n    const resumeDoc = {\n      userId,\n      fileName: file.name,\n      extractedText: resumeText,\n      uploadedAt: new Date(),\n    };\n\n    await adminDb.collection('resumes').doc(userId).set(resumeDoc);\n\n    return NextResponse.json({ \n      success: true, \n      resumeText\n    });\n\n  } catch (error) {\n    console.error('Error uploading resume:', error);\n    return NextResponse.json({ \n      error: 'Failed to upload and process resume' \n    }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,MAAM,SAAS,SAAS,GAAG,CAAC;QAE5B,IAAI,CAAC,QAAQ,CAAC,QAAQ;YACpB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,IAAI,KAAK,IAAI,KAAK,mBAAmB;YACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,yBAAyB;QACzB,MAAM,SAAS,OAAO,IAAI,CAAC,MAAM,KAAK,WAAW;QAEjD,wBAAwB;QACxB,IAAI,aAAa;QACjB,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,6KAAG,EAAC;YACvB,aAAa,KAAK,IAAI,IAAI;QAC5B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,aAAa,CAAC,mBAAmB,EAAE,KAAK,IAAI,CAAC,kFAAkF,CAAC;QAClI;QAEA,oCAAoC;QACpC,MAAM,YAAY;YAChB;YACA,UAAU,KAAK,IAAI;YACnB,eAAe;YACf,YAAY,IAAI;QAClB;QAEA,MAAM,8HAAO,CAAC,UAAU,CAAC,WAAW,GAAG,CAAC,QAAQ,GAAG,CAAC;QAEpD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}